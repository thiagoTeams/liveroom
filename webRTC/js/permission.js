const isLogPermission=!1,logPermission=i=>{false};function requestAllPermission(i,o,e,s){return new Promise((async r=>{if("notification"===i)if(window.Notification){if("granted"===Notification.permission)return void r(!0);$("#permissionTitle")&&$("#permissionTitle").text(o),$("#permissionDescription")&&$("#permissionDescription").text(e),$("#permissionModal")&&$("#permissionModal").modal({backdrop:"static",keyboard:!0,show:!0}).modal("show"),$("#permissionConfirm")&&$("#permissionConfirm").unbind("click"),$("#permissionConfirm")&&$("#permissionConfirm").click((function(e){$("#permissionModal")&&$("#permissionModal").modal("hide"),Notification.requestPermission().then((function(e){"denied"===e?(logPermission("Notification denied..."),r(!1),requestAllPermission(i,o,s)):"granted"===e&&(logPermission("Notification granted..."),r(!0))}))}))}else logPermission("Notification not supported"),r(!1);else"camera"===i?navigator.permissions.query({name:"camera"}).then((n=>{logPermission(`${i} state=${n.state}`),"granted"===n.state?r(!0):"prompt"===n.state?($("#permissionTitle")&&$("#permissionTitle").text(o),$("#permissionDescription")&&$("#permissionDescription").text(e),$("#permissionModal")&&$("#permissionModal").modal({backdrop:"static",keyboard:!0,show:!0}).modal("show"),$("#permissionConfirm")&&$("#permissionConfirm").unbind("click"),$("#permissionConfirm")&&$("#permissionConfirm").click((async function(n){$("#permissionModal")&&$("#permissionModal").modal("hide");try{(await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})).getVideoTracks().forEach((function(i){i.stop()})),logPermission("Camera granted..."),r(!0)}catch(n){n instanceof DOMException?"NotAllowedError"===n.name?(logPermission("Camera denied..."),r(!1),requestAllPermission(i,o,e,s)):"NotFoundError"===n.name?(logPermission("Camera not found..."),r(!1)):(logPermission("Camera DOMException..."),r(!1)):(logPermission("Camera unexpected error..."),r(!1))}}))):"denied"===n.state&&($("#permissionTitle")&&$("#permissionTitle").text(o),$("#permissionDescription")&&$("#permissionDescription").text(s),$("#permissionModal")&&$("#permissionModal").modal({backdrop:"static",keyboard:!0,show:!0}).modal("show"),$("#permissionConfirm")&&$("#permissionConfirm").unbind("click"),$("#permissionConfirm")&&$("#permissionConfirm").click((async function(n){$("#permissionModal")&&$("#permissionModal").modal("hide");try{(await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})).getVideoTracks().forEach((function(i){i.stop()})),logPermission("Camera granted..."),r(!0)}catch(n){n instanceof DOMException?"NotAllowedError"===n.name?(logPermission("Camera denied..."),r(!1),requestAllPermission(i,o,e,s)):"NotFoundError"===n.name?(logPermission("Camera not found..."),r(!1)):(logPermission("Camera DOMException..."),r(!1)):(logPermission("Camera unexpected error..."),r(!1))}})))})).catch((i=>{logPermission("Got error :",i)})):"microphone"===i?navigator.permissions.query({name:"microphone"}).then((n=>{logPermission(`${i} state=${n.state}`),"granted"===n.state?r(!0):"prompt"===n.state?($("#permissionTitle")&&$("#permissionTitle").text(o),$("#permissionDescription")&&$("#permissionDescription").text(e),$("#permissionModal")&&$("#permissionModal").modal({backdrop:"static",keyboard:!0,show:!0}).modal("show"),$("#permissionConfirm")&&$("#permissionConfirm").unbind("click"),$("#permissionConfirm")&&$("#permissionConfirm").click((async function(n){$("#permissionModal")&&$("#permissionModal").modal("hide");try{(await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})).getVideoTracks().forEach((function(i){i.stop()})),logPermission("Camera granted..."),r(!0)}catch(n){n instanceof DOMException?"NotAllowedError"===n.name?(logPermission("Camera denied..."),r(!1),requestAllPermission(i,o,e,s)):"NotFoundError"===n.name?(logPermission("Camera not found..."),r(!1)):(logPermission("Camera DOMException..."),r(!1)):(logPermission("Camera unexpected error..."),r(!1))}}))):"denied"===n.state&&($("#permissionTitle")&&$("#permissionTitle").text(o),$("#permissionDescription")&&$("#permissionDescription").text(s),$("#permissionModal")&&$("#permissionModal").modal({backdrop:"static",keyboard:!0,show:!0}).modal("show"),$("#permissionConfirm")&&$("#permissionConfirm").unbind("click"),$("#permissionConfirm")&&$("#permissionConfirm").click((async function(n){$("#permissionModal")&&$("#permissionModal").modal("hide");try{(await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})).getVideoTracks().forEach((function(i){i.stop()})),logPermission("Camera granted..."),r(!0)}catch(n){n instanceof DOMException?"NotAllowedError"===n.name?(logPermission("Camera denied..."),r(!1),requestAllPermission(i,o,e,s)):"NotFoundError"===n.name?(logPermission("Camera not found..."),r(!1)):(logPermission("Camera DOMException..."),r(!1)):(logPermission("Camera unexpected error..."),r(!1))}})))})).catch((i=>{logPermission("Got error :",i)})):"screen"===i?r(!0):logPermission(`Quyển chưa được khai báo: ${permission}`)}))}